<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AVODA Wallet</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.png" type="image/png">
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    .wallet-section { margin-bottom: 2rem; }
    .input-group { display: flex; align-items: center; margin: 0.5rem 0; }
    .input-group input { flex: 1; padding: 0.5rem; }
    button { margin-left: 0.5rem; padding: 0.5rem 1rem; }
    .hidden { display: none; }
    .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 0.5rem 1rem; border-radius: 5px; display: none; }
  </style>
</head>
<body>
  <h1>🚀 AVODA Wallet</h1>
  <div class="wallet-section">
    <label>Password:</label>
    <div class="input-group">
      <input type="password" id="walletPassword" />
      <button onclick="togglePassword()">Show</button>
    </div>
  </div>  <div class="wallet-section">
    <button onclick="createWallet()">Generate Wallet</button>
  </div>  <div class="wallet-section hidden" id="walletInfo">
    <div class="input-group">
      <input id="publicKey" readonly />
      <button onclick="copyToClipboard('publicKey')">📋 Copy</button>
    </div>
    <canvas id="qrcode"></canvas><div class="input-group">
  <input type="password" id="privateKey" readonly />
  <button onclick="togglePrivateKey()">Reveal</button>
  <button onclick="copyToClipboard('privateKey')">📋 Copy</button>
</div>

<button onclick="downloadPrivateKey()">⬇️ Download Private Key</button>
<button onclick="logout()">🔒 Logout</button>

  </div>  <div class="toast" id="toast"></div>  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>  <script>
    let isPrivateVisible = false;
    let autoLockTimer;

    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.innerText = msg;
      toast.style.display = 'block';
      setTimeout(() => { toast.style.display = 'none'; }, 3000);
    }

    function togglePassword() {
      const input = document.getElementById('walletPassword');
      input.type = input.type === 'password' ? 'text' : 'password';
    }

    function togglePrivateKey() {
      const input = document.getElementById('privateKey');
      isPrivateVisible = !isPrivateVisible;
      input.type = isPrivateVisible ? 'text' : 'password';
    }

    function copyToClipboard(id) {
      const input = document.getElementById(id);
      navigator.clipboard.writeText(input.value);
      showToast('Copied!');
    }

    function createWallet() {
      const pass = document.getElementById('walletPassword').value;
      if (!pass) return showToast('Enter a password first!');
      const pub = 'AVD' + Math.random().toString(36).slice(2, 12);
      const priv = Math.random().toString(36).slice(2) + Date.now();
      localStorage.setItem('wallet', JSON.stringify({ pub, priv, pass }));
      loadWallet();
    }

    function loadWallet() {
      const data = JSON.parse(localStorage.getItem('wallet'));
      if (!data) return;
      document.getElementById('walletInfo').classList.remove('hidden');
      document.getElementById('publicKey').value = data.pub;
      document.getElementById('privateKey').value = data.priv;
      QRCode.toCanvas(document.getElementById('qrcode'), data.pub);
      resetAutoLock();
    }

    function logout() {
      localStorage.removeItem('wallet');
      location.reload();
    }

    function downloadPrivateKey() {
      const key = document.getElementById('privateKey').value;
      const blob = new Blob([key], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'avoda-private-key.txt';
      a.click();
    }

    function resetAutoLock() {
      clearTimeout(autoLockTimer);
      autoLockTimer = setTimeout(() => {
        logout();
      }, 300000); // 5 mins
    }

    window.onload = loadWallet;
    document.body.onmousemove = resetAutoLock;
    document.body.onkeydown = resetAutoLock;
  </script></body>
  </html>
