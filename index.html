<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0d0d0d">
  <title>AVODA Wallet</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body {
      background-color: #0d0d0d;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }.container {
  max-width: 500px;
  margin: auto;
}

.card {
  background-color: #1a1a1a;
  border: none;
  border-radius: 12px;
  padding: 20px;
  margin-top: 20px;
}

.form-control,
.btn {
  border-radius: 8px;
}

.wallet-address {
  word-break: break-all;
}

  </style>
</head><body>
  <div class="container">
    <h2 class="text-center">🚀 AVODA Wallet (Beta)</h2><div class="card">
  <h5>Create Wallet</h5>
  <button class="btn btn-success w-100 mb-2" onclick="createWallet()">🔐 Generate Wallet</button>

  <div id="wallet-info" style="display: none;">
    <p><strong>Address:</strong></p>
    <p class="wallet-address" id="walletAddress"></p>

    <p><strong>Private Key:</strong> <span id="hiddenKey">••••••••••</span>
      <button class="btn btn-sm btn-secondary" onclick="toggleKey()">👁️</button>
    </p>

    <button class="btn btn-warning w-100 mb-2" onclick="downloadKey()">⬇️ Download Private Key</button>
    <button class="btn btn-primary w-100 mb-2" onclick="copyWallet()">📋 Copy to Clipboard</button>
    <canvas id="qrCanvas" class="w-100"></canvas>

    <hr>
    <p><strong>Password Protect:</strong></p>
    <input type="password" id="walletPassword" class="form-control mb-2" placeholder="Set Password">
    <button class="btn btn-outline-light w-100" onclick="saveToLocal()">💾 Save Wallet to Browser</button>
  </div>
</div>

  </div>  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>  <script>
    let currentWallet = null;
    let showKey = false;

    function createWallet() {
      const wallet = ethers.Wallet.createRandom();
      currentWallet = wallet;
      document.getElementById("walletAddress").textContent = wallet.address;
      document.getElementById("hiddenKey").textContent = "••••••••••";
      document.getElementById("wallet-info").style.display = "block";
      generateQRCode(wallet.address);
    }

    function toggleKey() {
      showKey = !showKey;
      if (!currentWallet) return;
      document.getElementById("hiddenKey").textContent = showKey ? currentWallet.privateKey : "••••••••••";
    }

    function copyWallet() {
      if (!currentWallet) return;
      navigator.clipboard.writeText(currentWallet.address);
      alert("Wallet address copied!");
    }

    function downloadKey() {
      if (!currentWallet) return;
      const blob = new Blob([`Address: ${currentWallet.address}\nPrivate Key: ${currentWallet.privateKey}`], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = "avoda_wallet.txt";
      a.click();
    }

    function generateQRCode(data) {
      QRCode.toCanvas(document.getElementById('qrCanvas'), data, { width: 250 }, err => {
        if (err) console.error(err);
      });
    }

    function saveToLocal() {
      const password = document.getElementById("walletPassword").value;
      if (!password || !currentWallet) return alert("Please enter password and generate wallet first");
      const walletData = {
        address: currentWallet.address,
        privateKey: currentWallet.privateKey
      };
      localStorage.setItem("avoda_wallet", JSON.stringify(walletData));
      alert("Wallet saved to browser");
    }
  </script></body></html>
